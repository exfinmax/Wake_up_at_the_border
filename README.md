# 梦醒边界（Wake up at the border）

## 项目简介

《梦醒边界》是一款基于 Godot 4.4.1 引擎开发的横版像素风2D解谜、对话、任务与战斗游戏。玩家在梦魇与现实的边界中穿梭，通过解谜、对话和战斗收集线索，逐步找回自我，体验多重梦境与心理成长的故事。

项目开发背景：参加 GodotGameJam，主题为"Wake"（醒来，代表从某一状态向下一状态切换的动作）。

---

## 主要玩法
- **多重梦境切换**：每次“醒来”进入不同空间，体验独特谜题与剧情。
- **解谜与探索**：收集记忆碎片，解锁主线与多结局。
- **对话与任务**：与NPC互动，接受并完成任务，推动剧情发展。
- **战斗系统**：与梦魇怪物战斗，考验操作与策略。

---

## 目录结构

- `assets/`：游戏美术资源（角色、场景、特效、字体等）。
- `components/`：通用组件（如攻击、健康系统）。
- `scenes/`：核心场景与关卡，包括：
  - `game/`：主流程、菜单、关卡切换等。
  - `player/`：玩家角色及其状态机。
  - `none_player_character/`：NPC与敌人，含状态机与AI。
  - `dialogue/`：对话系统与UI。
  - `quest/`：任务系统与UI。
  - `stages/`：具体关卡场景。
- `Resource/`：对话、任务等数据资源（如JSON、脚本）。
- `utils/`：全局工具与事件管理。

---

# 梦醒边界（Wake up at the border）

一个基于 Godot 引擎开发的 2D 动作角色扮演游戏。

## 项目架构

### 目录结构

- `assets/`：游戏美术资源
  - 角色精灵图
  - 场景贴图
  - 特效资源
  - 字体资源
  
- `components/`：公共组件
  - `attack.gd`：攻击系统组件
  - `health.gd`：生命值系统组件

- `scenes/`：核心场景
  - `game/`：游戏主流程
    - `screen_factory.gd`：场景工厂
    - `the_game.gd`：主游戏控制器
  - `player/`：玩家系统
    - 状态机实现（移动、攻击、防御等）
    - 角色控制器
  - `none_player_character/`：NPC系统
    - NPC基类与状态机
    - 敌人AI实现
  - `dialogue/`：对话系统
    - 对话管理器
    - 对话UI
  - `quest/`：任务系统
    - 任务管理器
    - 任务UI
    - 任务追踪器
  - `stages/`：游戏关卡

- `Resource/`：数据资源
  - `dialogue/`：对话数据（JSON格式）
  - `quest/`：任务配置
  - `npc_data.gd`：NPC数据定义

- `utils/`：工具类
  - `game_events.gd`：全局事件系统
  - `global.gd`：全局变量管理

## 核心系统

### 1. 状态机系统
- 基于面向对象设计的状态模式实现
- 玩家与NPC共用状态机架构
- 主要状态：
  - MOVE：移动状态
  - ATTACK：攻击状态
  - AIR：空中状态
  - HURT：受伤状态
  - DEFEND：防御状态
  - SPECIAL：特殊状态
- 状态工厂负责状态实例创建和切换

### 2. 对话系统
- 基于JSON的对话数据存储
- 支持分支对话和多轮对话
- 对话树结构：
  - 分支ID（branch_id）
  - 对话状态（state）
  - 对话文本（text）
  - 选项（options）
- 与任务系统联动，支持任务触发和完成

### 3. 任务系统
- 完整的任务生命周期管理
  - 任务添加
  - 状态更新
  - 目标追踪
  - 完成检测
- 任务类型：
  - 对话任务（talk_to）
  - 收集任务（collection）
- 任务UI功能：
  - 任务列表显示
  - 任务详情查看
  - 实时任务追踪
  - 任务奖励显示

### 4. 组件系统
- 攻击组件（Attack）
  - 伤害计算
  - 碰撞检测
  - 攻击动画
- 生命值组件（Health）
  - 生命值管理
  - 受伤处理
  - 死亡判定

### 5. NPC系统
- 基础NPC类（BaseNpc）
  - 属性配置
  - 移动控制
  - 状态管理
- 敌人AI
  - 巡逻行为
  - 追击逻辑
  - 攻击判定
- NPC交互
  - 对话触发
  - 任务发放
  - 物品交易

## 游戏控制
- 移动：方向键或WASD
- 交互：J键
- 任务菜单：Quest Menu键
- 防御：待实现
- 攻击：待实现

## 开发环境
- Godot 4.4
- GDScript

---

## 启动方式
1. 使用 Godot 4.4.1 打开本项目（`project.godot`）。
2. 运行主场景（`scenes/game/the_game.tscn`）。

---

## 未来计划与TODO
- 丰富关卡与谜题设计。
- 增加更多NPC与支线任务。
- 优化战斗与AI体验。
- 多结局与剧情分支完善。

---

## 致谢
- 素材来源于开源社区及自制。
- 感谢Godot Engine及相关插件作者。

---

如需参与开发或反馈建议，请联系作者或提交issue。
